<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.1 http://maven.apache.org/xsd/assembly-1.1.1.xsd">
   <id>tomcat</id>
   <includeBaseDirectory>false</includeBaseDirectory>
   <formats>
     <!-- format>dir</format -->
     <format>zip</format>
   </formats>
   <fileSets>
      <!-- Default files -->
      <fileSet>
         <directory>target/tomcat-source</directory>
         <outputDirectory>app-server-tomcat</outputDirectory>
         <excludes>
           <exclude>**/*.sh</exclude>
           <exclude>webapps/ROOT/**/*</exclude>
         </excludes>
         <fileMode>0644</fileMode>
      </fileSet>
      <!-- Patched executable files -->
      <fileSet>
         <directory>src/main/resources/tomcat</directory>
         <outputDirectory>app-server-tomcat</outputDirectory>
         <includes>
           <include>**/*.sh</include>
           <include>*.sh</include>
         </includes>
         <fileMode>0755</fileMode>
      </fileSet>
      <!-- Executable files -->
      <fileSet>
         <directory>target/tomcat-source</directory>
         <outputDirectory>app-server-tomcat</outputDirectory>
         <includes>
           <include>**/*.sh</include>
           <include>*.sh</include>
         </includes>
         <fileMode>0755</fileMode>
      </fileSet>
   </fileSets>
   <dependencySets>
     <dependencySet>
       <outputDirectory>app-server-tomcat/webapps</outputDirectory>
       <includes>
         <include>com.exoplatform.cloudworkspaces:cloud-workspaces-webui:war</include>
       </includes>
       <outputFileNameMapping>ROOT.war</outputFileNameMapping>
       <fileMode>0644</fileMode>
     </dependencySet>
     <dependencySet>
       <outputDirectory>app-server-tomcat/webapps</outputDirectory>
       <includes>
         <include>com.exoplatform.cloudworkspaces:cloud-workspaces-gadgets:war</include>
       </includes>
       <outputFileNameMapping>cloud-workspaces-gadgets.war</outputFileNameMapping>
       <fileMode>0644</fileMode>
     </dependencySet>
     <dependencySet>
       <outputDirectory>app-server-tomcat/lib</outputDirectory>
       <includes>
         <include>mysql:mysql-connector-java</include>
         <include>com.exoplatform.cloudworkspaces:cloud-workspaces-component-organization</include>
         <include>com.exoplatform.cloudworkspaces:cloud-workspaces-component-multitenancy</include>
         <include>com.exoplatform.cloudworkspaces:cloud-workspaces-gadget-services</include>
         <include>com.exoplatform.cloudworkspaces:cloud-workspaces-gadget-config</include>
       </includes>
       <fileMode>0644</fileMode>
     </dependencySet>
   </dependencySets>
</assembly>
